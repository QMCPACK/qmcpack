
  LIST(APPEND DIAMOND2_SCALARS "totenergy" "-21.668293 0.007")
  LIST(APPEND DIAMOND2_SCALARS "kinetic" "20.065151 0.044")
  LIST(APPEND DIAMOND2_SCALARS "potential" "-41.733377 0.045")
  LIST(APPEND DIAMOND2_SCALARS "eeenergy" "-5.428561 0.012")
  LIST(APPEND DIAMOND2_SCALARS "ionion" "-25.5513269 0.001")
  LIST(APPEND DIAMOND2_SCALARS "localecp" "-12.29402 0.051")
  LIST(APPEND DIAMOND2_SCALARS "nonlocalecp" "1.540530 0.018")
  LIST(APPEND DIAMOND2_SCALARS "samples" "32000 0.0")
#  LIST(APPEND DIAMOND2_SCALARS "flux" "0.0 0.7")

  QMC_RUN_AND_CHECK(short-diamondC_2x1x1_pp-vmc_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_short
                    qmc_short.in.xml
                    1 16
                    TRUE
                    0 DIAMOND2_SCALARS # VMC
                    )

  QMC_RUN_AND_CHECK(short-diamondC_2x1x1_pp-vmcbatch_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_short
                    qmc_short_vmcbatch.in.xml
                    1 16
                    TRUE
                    0 DIAMOND2_SCALARS # VMC
                    )

  QMC_RUN_AND_CHECK(short-diamondC_2x1x1_pp-delayed_update-vmc_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_short
                    qmc_short_delayedupdate.in.xml
                    1 16
                    TRUE
                    0 DIAMOND2_SCALARS # VMC
                    )

IF(ENABLE_SOA OR QMC_CUDA)
  QMC_RUN_AND_CHECK(short-diamondC_2x1x1_hybridrep_pp-vmc_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_short
                    qmc_short_hybridrep.in.xml
                    1 16
                    TRUE
                    0 DIAMOND2_SCALARS # VMC
                    )
ELSE()
  MESSAGE("Skipping diamondC_2x1x1_hybridrep_pp-vmc_sdj test because neither SOA nor CUDA is enabled")
ENDIF()

# Reference DMC run in qmc-ref "-21.844975 0.001113"
  LIST(APPEND DIAMOND2_DMC_SCALARS "totenergy" "-21.844975 0.00779")
  QMC_RUN_AND_CHECK(short-diamondC_2x1x1_pp-dmc_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_short_vmc_dmc
                    qmc_short_vmc_dmc.in.xml
                    1 16
                    TRUE
                    1 DIAMOND2_DMC_SCALARS # DMC
                    )

  QMC_RUN_AND_CHECK(short-diamondC_2x1x1_pp-vmcbatch_dmcbatch_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_short_vmcbatch_dmcbatch
                    qmc_short_vmcbatch_dmcbatch.in.xml
                    1 16
                    TRUE
                    1 DIAMOND2_DMC_SCALARS # DMC
                    )
                  
  LIST(APPEND DIAMOND2_DMC_SCALARS "totenergy" "-21.844975 0.00779")
  QMC_RUN_AND_CHECK(short-diamondC_2x1x1_pp-dmc-reconf_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_short_vmc_dmc
                    qmc_short_vmc_dmc_reconf.in.xml
                    1 16
                    TRUE
                    1 DIAMOND2_DMC_SCALARS # DMC
                    )

# Exicted state

  LIST(APPEND DIAMOND2_EXCITED_SCALARS "totenergy" "-21.117471 0.007937")
  LIST(APPEND DIAMOND2_EXCITED_SCALARS "kinetic"    "20.070595 0.043211")
  LIST(APPEND DIAMOND2_EXCITED_SCALARS "potential" "-41.188066 0.044583")
  LIST(APPEND DIAMOND2_EXCITED_SCALARS "eeenergy"   "-5.453806 0.013619")
  LIST(APPEND DIAMOND2_EXCITED_SCALARS "ionion"    "-25.551327 0.00001")
  LIST(APPEND DIAMOND2_EXCITED_SCALARS "localecp"  "-11.732568 0.050756")
  LIST(APPEND DIAMOND2_EXCITED_SCALARS "nonlocalecp" "1.549634 0.018029")
  LIST(APPEND DIAMOND2_EXCITED_SCALARS "samples" "32000 0.0")

  QMC_RUN_AND_CHECK(short-diamondC_2x1x1_pp-vmc_sdj_excited
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_short_excited
                    qmc_short_excited.in.xml
                    1 16
                    TRUE
                    0 DIAMOND2_EXCITED_SCALARS # VMC
                    )

  LIST(APPEND DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-21.359004 0.012291")

  QMC_RUN_AND_CHECK(short-diamondC_2x1x1_pp-dmc_sdj_excited
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_short_vmc_dmc_excited
                    qmc_short_vmc_dmc_excited.in.xml
                    1 16
                    TRUE
                    1 DIAMOND2_DMC_EXCITED_SCALARS # DMC
                    )

#
# Long tests
#

  LIST(APPEND LONG_DIAMOND2_SCALARS "totenergy" "-21.668293 0.00023")
  LIST(APPEND LONG_DIAMOND2_SCALARS "samples" "30720000 0.0")
  LIST(APPEND LONG_DIAMOND2_SCALARS "flux" "0.0 0.05")

  QMC_RUN_AND_CHECK(long-diamondC_2x1x1_pp-vmc_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_long
                    qmc_long.in.xml
                    1 16
                    TRUE
                    0 LONG_DIAMOND2_SCALARS # VMC
                    )

# Reference DMC run in qmc-ref "-21.844975 0.001113"
  LIST(APPEND LONG_DIAMOND2_DMC_SCALARS "totenergy" "-21.844975 0.002879")
  QMC_RUN_AND_CHECK(long-diamondC_2x1x1_pp-dmc_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_long_vmc_dmc
                    qmc_long_vmc_dmc.in.xml
                    1 16
                    TRUE
                    1 LONG_DIAMOND2_DMC_SCALARS # DMC
                    )

  QMC_RUN_AND_CHECK(long-diamondC_2x1x1_pp-dmc-reconf_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_long_vmc_dmc
                    qmc_long_vmc_dmc_reconf.in.xml
                    1 16
                    TRUE
                    1 LONG_DIAMOND2_DMC_SCALARS # DMC
                    )

# Excited state
  LIST(APPEND LONG_DIAMOND2_EXCITED_SCALARS "totenergy" "-21.117471 0.00027")
  LIST(APPEND LONG_DIAMOND2_EXCITED_SCALARS "samples" "30720000 0.0")
  LIST(APPEND LONG_DIAMOND2_EXCITED_SCALARS "flux" "-0.042346 0.075078")

  QMC_RUN_AND_CHECK(long-diamondC_2x1x1_pp-vmc_sdj_excited
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_long_excited
                    qmc_long_excited.in.xml
                    1 16
                    TRUE
                    0 LONG_DIAMOND2_EXCITED_SCALARS # VMC
                    )

  LIST(APPEND LONG_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-21.359004 0.004056")
  QMC_RUN_AND_CHECK(long-diamondC_2x1x1_pp-dmc_sdj_excited
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    qmc_long_vmc_dmc_excited
                    qmc_long_vmc_dmc_excited.in.xml
                    1 16
                    TRUE
                    1 LONG_DIAMOND2_DMC_EXCITED_SCALARS # DMC
                    )

#
# Deterministic tests
#

# VMC RUN
IF(NOT QMC_CUDA)
 IF(QMC_MIXED_PRECISION)
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_SCALARS "totenergy" "-22.30282849 0.00003531")
   LIST(APPEND DET_DIAMOND2_SCALARS "kinetic" "19.25970008 0.00012922")
   LIST(APPEND DET_DIAMOND2_SCALARS "potential" "-41.56252857 0.00009881")
   LIST(APPEND DET_DIAMOND2_SCALARS "eeenergy" "-7.25690848 0.00002388")
   LIST(APPEND DET_DIAMOND2_SCALARS "ionion" "-25.55133296 0.0000014")
   LIST(APPEND DET_DIAMOND2_SCALARS "localecp" "-10.85086697 0.00021079")
   LIST(APPEND DET_DIAMOND2_SCALARS "nonlocalecp" "2.09657984 0.00008703")
   LIST(APPEND DET_DIAMOND2_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_SCALARS "kecorr" "0.030264591387 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "flux" "-5.34650349 0.00047629")
  ELSE()
   LIST(APPEND DET_DIAMOND2_SCALARS "totenergy" "-22.29892024 0.00008588")
   LIST(APPEND DET_DIAMOND2_SCALARS "kinetic" "19.26598410 0.00014541")
   LIST(APPEND DET_DIAMOND2_SCALARS "potential" "-41.56490434 0.00007327")
   LIST(APPEND DET_DIAMOND2_SCALARS "eeenergy" "-7.25613581 0.00002740")
   LIST(APPEND DET_DIAMOND2_SCALARS "ionion" "-25.55133291 0.00000135")
   LIST(APPEND DET_DIAMOND2_SCALARS "localecp" "-10.85690056 0.00018856")
   LIST(APPEND DET_DIAMOND2_SCALARS "nonlocalecp" "2.09946494 0.00010037")
   LIST(APPEND DET_DIAMOND2_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_SCALARS "kecorr" "0.030264591387 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "flux" "-5.36613862 0.00026178")
  ENDIF()
 ELSE()
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_SCALARS "totenergy" "-22.30283274 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "kinetic" "19.25965947 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "potential" "-41.56249222 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "eeenergy" "-7.25691718 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "ionion" "-25.55132676 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "localecp" "-10.85078393 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "nonlocalecp" "2.09653564 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_SCALARS "kecorr" "0.030264591387 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "flux" "-5.34634371 0.000001")
  ELSE()
   LIST(APPEND DET_DIAMOND2_SCALARS "totenergy" "-22.29890271 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "kinetic" "19.26597773 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "potential" "-41.56488044 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "eeenergy" "-7.25613869 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "ionion" "-25.55132676 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "localecp" "-10.85686146 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "nonlocalecp" "2.09944647 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_SCALARS "kecorr" "0.030264591387 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "flux" "-5.36609515 0.000001")
  ENDIF()

#  QMC_RUN_AND_CHECK(deterministic-diamondC_2x1x1_pp-vmcbatch_sdj
#                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
#                    det_qmc_short
#                    det_qmc_short_vmcbatch.in.xml
#                    1 1
#                    TRUE
#                    0 DET_DIAMOND2_SCALARS # VMC
#                    )

 ENDIF()

  QMC_RUN_AND_CHECK(deterministic-diamondC_2x1x1_pp-vmc_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    det_qmc_short
                    det_qmc_short.in.xml
                    1 1
                    TRUE
                    0 DET_DIAMOND2_SCALARS # VMC
                    )

 IF(QMC_MIXED_PRECISION)
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "totenergy" "-21.82533046 0.00003607")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "kinetic" "22.21682064 0.00005723")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "potential" "-44.04215109 0.00004795")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "eeenergy" "-6.22921220 0.00001674")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "ionion" "-25.55133296 0.0000014")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "localecp" "-13.30257077 0.00005318")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "nonlocalecp" "1.04096483 0.00000726")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "flux" "-19.91569882 0.00047829")
  ELSE()
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "totenergy" "-21.82258864 0.00002587")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "kinetic" "22.21966036 0.00006011")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "potential" "-44.04224900 0.00004784")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "eeenergy" "-6.22922160 0.00001946")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "ionion" "-25.55133291 0.00000135")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "localecp" "-13.30271625 0.00004867")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "nonlocalecp" "1.04102175 0.00000802")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "flux" "-19.92297713 0.0005331")
  ENDIF()
 ELSE()
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "totenergy" "-21.82533699 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "kinetic" "22.21682105 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "potential" "-44.04215804 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "eeenergy" "-6.22920728 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "ionion" "-25.55132710 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "localecp" "-13.30258890 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "nonlocalecp" "1.04096524 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "flux" "-19.91551775 0.000001")
  ELSE()
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "totenergy" "-21.82258916 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "kinetic" "22.21966742 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "potential" "-44.04225658 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "eeenergy" "-6.22921778 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "ionion" "-25.55132710 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "localecp" "-13.30273399 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "nonlocalecp" "1.04102228 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "flux" "-19.92285549 0.000001")
  ENDIF()
 ENDIF()

  QMC_RUN_AND_CHECK(deterministic-diamondC_2x1x1_pp-vmc_sdj_excited
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    det_qmc_short_excited
                    det_qmc_short_excited.in.xml
                    1 1
                    TRUE
                    0 DET_DIAMOND2_EXCITED_SCALARS # VMC
                    )

# VMC DELAYED-UPDATE
 IF(QMC_MIXED_PRECISION)
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "totenergy" "-20.94751794 0.00001857")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "kinetic" "16.53206588 0.00002208")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "potential" "-37.47958111 0.00002475")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "eeenergy" "-4.25515637 0.00000418")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "ionion" "-25.55133296 0.0000014")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "localecp" "-9.39410011 0.00002983")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "nonlocalecp" "1.72100833 0.00000237")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "flux" "-12.47276797 0.00007329")
  ELSE()
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "totenergy" "-20.94387477 0.0000242")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "kinetic" "16.53548278 0.00002493")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "potential" "-37.47935755 0.00002767")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "eeenergy" "-4.25504497 0.00000506")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "ionion" "-25.55133291 0.00000135")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "localecp" "-9.39386018 0.00002929")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "nonlocalecp" "1.72088050 0.0000045")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "flux" "-12.48033341 0.00006604")
  ENDIF()
 ELSE()
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "totenergy" "-20.94752145 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "kinetic" "16.53205375 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "potential" "-37.47957520 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "eeenergy" "-4.25515766 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "ionion" "-25.55132676 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "localecp" "-9.39410085 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "nonlocalecp" "1.72101007 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "flux" "-12.47274689 0.000001")
  ELSE()  
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "totenergy" "-20.94387935 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "kinetic" "16.53547309 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "potential" "-37.47935243 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "eeenergy" "-4.25504502 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "ionion" "-25.55132676 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "localecp" "-9.39386209 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "nonlocalecp" "1.72088142 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "flux" "-12.48031692 0.000001")
  ENDIF()
 ENDIF()  

  QMC_RUN_AND_CHECK(deterministic-diamondC_2x1x1_pp-delayed_update-vmc_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    det_qmc_short
                    det_qmc_short_delayedupdate.in.xml
                    1 1
                    TRUE
                    0 DET_DIAMOND2_DELAY_SCALARS # VMC
                    )

# DMC RUN
 IF(QMC_MIXED_PRECISION)
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "totenergy" "-21.04525299 0.00001029")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "kinetic" "22.67695498 0.00001003")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "potential" "-43.72220797 0.00000515")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "eeenergy" "-6.17624904 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "ionion" "-25.55133296 0.0000014")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "localecp" "-9.10928079 0.00000442")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "nonlocalecp" "-2.88534519 0.00000177")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "samples" "9.00000000 0.0")
  ELSE()
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "totenergy" "-21.05326001 0.00001462")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "kinetic" "22.66898761 0.00001749")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "potential" "-43.72224762 0.00000912")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "eeenergy" "-6.17623877 0.00000144")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "ionion" "-25.55133291 0.00000135")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "localecp" "-9.10933337 0.00000562")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "nonlocalecp" "-2.88534257 0.00000442")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "samples" "9.00000000 0.0")
  ENDIF()
 ELSE()
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "totenergy" "-21.04525132 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "kinetic" "22.67697372 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "potential" "-43.72222505 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "eeenergy" "-6.17624438 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "ionion" "-25.55132676 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "localecp" "-9.10929967 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "nonlocalecp" "-2.88535424 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "samples" "9.00000000 0.0")
  ELSE()
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "totenergy" "-21.05325436 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "kinetic" "22.66901302 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "potential" "-43.72226738 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "eeenergy" "-6.17624150 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "ionion" "-25.55132676 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "localecp" "-9.10934270 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "nonlocalecp" "-2.88535642 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "samples" "9.00000000 0.0")
  ENDIF()
 ENDIF()

  QMC_RUN_AND_CHECK(deterministic-diamondC_2x1x1_pp-dmc_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    det_qmc_short_vmc_dmc
                    det_qmc_short_vmc_dmc.in.xml
                    1 1
                    TRUE
                    1 DET_DIAMOND2_DMC_SCALARS # DMC
                    )

 IF(QMC_MIXED_PRECISION)
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-19.57990811 0.00002128")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "kinetic" "24.19436676 0.00002563")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "potential" "-43.77427487 0.00000861")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "eeenergy" "-5.85898725 0.00000192")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "ionion" "-25.55133296 0.0000014")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "localecp" "-16.64208323 0.00000777")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "nonlocalecp" "4.27812857 0.00001229")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "samples" "9.00000000 0.0")
  ELSE()
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-19.58550132 0.00001859")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "kinetic" "24.18875877 0.00002343")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "potential" "-43.77426009 0.00001142")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "eeenergy" "-5.85898179 0.00000163")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "ionion" "-25.55133291 0.00000135")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "localecp" "-16.64210613 0.00001074")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "nonlocalecp" "4.27816074 0.00001354")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "samples" "9.00000000 0.0")
  ENDIF()
 ELSE()
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-19.57992731 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "kinetic" "24.19434492 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "potential" "-43.77427223 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "eeenergy" "-5.85898752 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "ionion" "-25.55132710 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "localecp" "-16.64208258 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "nonlocalecp" "4.27812496 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "samples" "9.00000000 0.0")
  ELSE()
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-19.58550609 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "kinetic" "24.18875130 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "potential" "-43.77425738 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "eeenergy" "-5.85898144 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "ionion" "-25.55132710 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "localecp" "-16.64210491 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "nonlocalecp" "4.27815606 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "samples" "9.00000000 0.0")
  ENDIF()
 ENDIF()

  QMC_RUN_AND_CHECK(deterministic-diamondC_2x1x1_pp-dmc_sdj_excited
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    det_qmc_short_vmc_dmc_excited
                    det_qmc_short_vmc_dmc_excited.in.xml
                    1 1
                    TRUE
                    1 DET_DIAMOND2_DMC_EXCITED_SCALARS # DMC
                    )

# CUDA references  
ELSE()
 # VMC runs
 IF(QMC_MIXED_PRECISION)
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_SCALARS "totenergy" "-21.89020271 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "kinetic" "19.34475506 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "potential" "-41.23495773 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "eeenergy" "-5.80716999 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "ionion" "-25.55132700 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "localecp" "-12.80697124 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "nonlocalecp" "2.93051050 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_SCALARS "flux" "-10.84155379 0.000001")
  ELSE()
   LIST(APPEND DET_DIAMOND2_SCALARS "totenergy" "-21.88556165 0.00004413")
   LIST(APPEND DET_DIAMOND2_SCALARS "kinetic" "19.34915172 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "potential" "-41.23473552 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "eeenergy" "-5.80717379 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "ionion" "-25.55132700 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "localecp" "-12.80669738 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "nonlocalecp" "2.93046265 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_SCALARS "flux" "-10.85016100 0.000001")
  ENDIF()
 ELSE()
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_SCALARS "totenergy" "-21.89021689 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "kinetic" "19.34474147 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "potential" "-41.23495836 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "eeenergy" "-5.80717002 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "ionion" "-25.55132694 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "localecp" "-12.80697507 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "nonlocalecp" "2.93051366 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_SCALARS "flux" "-10.84152599 0.000001")
  ELSE()
   LIST(APPEND DET_DIAMOND2_SCALARS "totenergy" "-21.88560221 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "kinetic" "19.34913447 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "potential" "-41.23473668 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "eeenergy" "-5.80717246 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "ionion" "-25.55132694 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "localecp" "-12.80670171 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "nonlocalecp" "2.93046442 0.000001")
   LIST(APPEND DET_DIAMOND2_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_SCALARS "flux" "-10.85014255 0.000001")
  ENDIF()
 ENDIF()

  QMC_RUN_AND_CHECK(deterministic-diamondC_2x1x1_pp-vmc_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    det_qmc_short
                    det_qmc_short.in.xml
                    1 1
                    TRUE
                    0 DET_DIAMOND2_SCALARS # VMC
                    )

 IF(QMC_MIXED_PRECISION)
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "totenergy" "-19.35642529 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "kinetic" "18.11198878 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "potential" "-37.46841406 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "eeenergy" "-5.23945531 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "ionion" "-25.55132700 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "localecp" "-7.80155630 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "nonlocalecp" "1.12392455 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "flux" "-7.26682921 0.000001")
  ELSE()
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "totenergy" "-19.33597770 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "kinetic" "18.13249727 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "potential" "-37.46847497 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "eeenergy" "-5.23953168 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "ionion" "-25.55132700 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "localecp" "-7.80151290 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "nonlocalecp" "1.12389661 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "flux" "-7.30756715 0.000001")
  ENDIF()
 ELSE()
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "totenergy" "-19.35640958 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "kinetic" "18.11200421 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "potential" "-37.46841379 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "eeenergy" "-5.23945567 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "ionion" "-25.55132694 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "localecp" "-7.80156231 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "nonlocalecp" "1.12393113 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "flux" "-7.26683500 0.000001")
  ELSE()
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "totenergy" "-19.33596948 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "kinetic" "18.13251898 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "potential" "-37.46848846 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "eeenergy" "-5.23953030 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "ionion" "-25.55132694 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "localecp" "-7.80152053 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "nonlocalecp" "1.12388931 0.000001")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_EXCITED_SCALARS "flux" "-7.30760928 0.000001")
  ENDIF()
 ENDIF()

  QMC_RUN_AND_CHECK(deterministic-diamondC_2x1x1_pp-vmc_sdj_excited
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    det_qmc_short_excited
                    det_qmc_short_excited.in.xml
                    1 1
                    TRUE
                    0 DET_DIAMOND2_EXCITED_SCALARS # VMC
                    )

# VMC DELAYED-UPDATE
 IF(QMC_MIXED_PRECISION)
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "totenergy" "-21.74272438 0.00000295")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "kinetic" "17.06505401 0.00001773")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "potential" "-38.80777839 0.00002067")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "eeenergy" "-7.30321549 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "ionion" "-25.55132700 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "localecp" "-6.87205995 0.00002244")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "nonlocalecp" "0.91882405 0.00000196")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "flux" "-10.69693323 0.00003947")
  ELSE()
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "totenergy" "-21.74329110 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "kinetic" "17.06563817 0.00000561")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "potential" "-38.80892928 0.00000640")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "eeenergy" "-7.30222239 0.00000634 ")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "ionion" "-25.55132700 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "localecp" "-6.87452550 0.00001503")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "nonlocalecp" "0.91914560 0.00000223")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "flux" "-10.69117935 0.00001544")
  ENDIF()
 ELSE()
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "totenergy" "-21.74275370 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "kinetic" "17.06504267 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "potential" "-38.80779637 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "eeenergy" "-7.30320156 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "ionion" "-25.55132694 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "localecp" "-6.87209644 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "nonlocalecp" "0.91882857 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "flux" "-10.69683005 0.000001")
  ELSE()
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "totenergy" "-21.74333602 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "kinetic" "17.06562079 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "potential" "-38.80895681 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "eeenergy" "-7.30220276 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "ionion" "-25.55132694 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "localecp" "-6.87457977 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "nonlocalecp" "0.91915265 0.000001")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "samples" "9.00000000 0.0")
   LIST(APPEND DET_DIAMOND2_DELAY_SCALARS "flux" "-10.69100800 0.000001")
  ENDIF()
 ENDIF()

  QMC_RUN_AND_CHECK(deterministic-diamondC_2x1x1_pp-delayed_update-vmc_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    det_qmc_short
                    det_qmc_short_delayedupdate.in.xml
                    1 1
                    TRUE
                    0 DET_DIAMOND2_DELAY_SCALARS # VMC
                    )

# DMC RUN
 IF(QMC_MIXED_PRECISION)
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "totenergy" "-19.40279265 0.00000295")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "kinetic" "18.56465345 0.0000024")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "potential" "-37.96744609 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "eeenergy" "-5.71650118 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "ionion" "-25.55132700 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "localecp" "-7.86569111 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "nonlocalecp" "1.16607320 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "samples" "9.00000000 0.0")
  ELSE()
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "totenergy" "-19.40331460 0.00000131")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "kinetic" "18.56412573 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "potential" "-37.96744033 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "eeenergy" "-5.71649889 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "ionion" "-25.55132700 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "localecp" "-7.86569526 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "nonlocalecp" "1.16608082 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "samples" "9.00000000 0.0")
  ENDIF()
 ELSE()
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "totenergy" "-19.40280208 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "kinetic" "18.56465081 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "potential" "-37.96745289 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "eeenergy" "-5.71650065 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "ionion" "-25.55132694 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "localecp" "-7.86569882 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "nonlocalecp" "1.16607351 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "samples" "9.00000000 0.0")
  ELSE()
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "totenergy" "-19.40332849 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "kinetic" "18.56411412 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "potential" "-37.96744262 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "eeenergy" "-5.71649975 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "ionion" "-25.55132694 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "localecp" "-7.86569564 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "nonlocalecp" "1.16607971 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_SCALARS "samples" "9.00000000 0.0")
  ENDIF()
 ENDIF()

  QMC_RUN_AND_CHECK(deterministic-diamondC_2x1x1_pp-dmc_sdj
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    det_qmc_short_vmc_dmc
                    det_qmc_short_vmc_dmc.in.xml
                    1 1
                    TRUE
                    1 DET_DIAMOND2_DMC_SCALARS # DMC
                    )

 IF(QMC_MIXED_PRECISION)
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-20.66429486 0.00000973")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "kinetic" "22.80989205 0.00000743")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "potential" "-43.47418691 0.00000230")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "eeenergy" "-0.24794420 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "ionion" "-25.55132700 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "localecp" "-16.58651542 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "nonlocalecp" "-1.08840029 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "samples" "9.00000000 0.0")
  ELSE()
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-20.65383596 0.00000927")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "kinetic" "22.82030441 0.00001099")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "potential" "-43.47414037 0.00000172")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "eeenergy" "-0.24793713 0.00000176")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "ionion" "-25.55132700 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "localecp" "-16.58648564 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "nonlocalecp" "-1.08839060 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "samples" "9.00000000 0.0")
  ENDIF()
 ELSE()
  IF(QMC_COMPLEX)
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-20.66429132 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "kinetic" "22.80991044 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "potential" "-43.47420176 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "eeenergy" "-0.24794375 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "ionion" "-25.55132694 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "localecp" "-16.58651611 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "nonlocalecp" "-1.08841496 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "samples" "9.00000000 0.0")
  ELSE()
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-20.65380482 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "kinetic" "22.82032553 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "potential" "-43.47413035 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "eeenergy" "-0.24793700 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "ionion" "-25.55132694 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "localecp" "-16.58647423 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "nonlocalecp" "-1.08839219 0.000001")
   LIST(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "samples" "9.00000000 0.0")
  ENDIF()
 ENDIF()

  QMC_RUN_AND_CHECK(deterministic-diamondC_2x1x1_pp-dmc_sdj_excited
                    "${CMAKE_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
                    det_qmc_short_vmc_dmc_excited
                    det_qmc_short_vmc_dmc_excited.in.xml
                    1 1
                    TRUE
                    1 DET_DIAMOND2_DMC_EXCITED_SCALARS # DMC
                    )
ENDIF()

