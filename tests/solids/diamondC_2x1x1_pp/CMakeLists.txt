list(APPEND DIAMOND2_SCALARS "totenergy" "-21.668293 0.015")
list(APPEND DIAMOND2_SCALARS "kinetic" "20.065151 0.044")
list(APPEND DIAMOND2_SCALARS "potential" "-41.733377 0.045")
list(APPEND DIAMOND2_SCALARS "eeenergy" "-5.428561 0.012")
list(APPEND DIAMOND2_SCALARS "ionion" "-25.5513269 0.001")
list(APPEND DIAMOND2_SCALARS "localecp" "-12.29402 0.051")
list(APPEND DIAMOND2_SCALARS "nonlocalecp" "1.540530 0.018")
list(APPEND DIAMOND2_SCALARS "samples" "32000 0.0")
#  LIST(APPEND DIAMOND2_SCALARS "flux" "0.0 0.7")

qmc_run_and_check(
  short-diamondC_2x1x1_pp-vmc_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short
  qmc_short.in.xml
  1
  16
  TRUE
  0
  DIAMOND2_SCALARS # VMC
)

# 16 batches of 1 walker each
qmc_run_and_check(
  short-diamondC_2x1x1_pp-vmcbatch_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short
  qmc_short_vmcbatch.in.xml
  1
  16
  TRUE
  0
  DIAMOND2_SCALARS # VMC
)

# 4 batches of 4 walkers
qmc_run_and_check(
  short-diamondC_2x1x1_pp-vmcbatch-4b_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short
  qmc_short_vmcbatch_4b.in.xml
  1
  4
  TRUE
  0
  DIAMOND2_SCALARS # VMC
)

# 4 batches of 4 walkers with asynchronous WF computation
qmc_run_and_check(
  short-diamondC_2x1x1_pp-vmcbatch-4b-asynctwf_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short
  qmc_short_vmcbatch_4b_asynctwf.in.xml
  1
  4
  TRUE
  0
  DIAMOND2_SCALARS # VMC
)

qmc_run_and_check(
  short-diamondC_2x1x1_pp-vmcbatch-4b_sdbatch_jas
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short
  qmc_short_sdbatch_vmcbatch_4b.in.xml
  1
  4
  TRUE
  0
  DIAMOND2_SCALARS # VMC
)

qmc_run_and_check(
  short-diamondC_2x1x1_pp-delayed_update-vmc_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short
  qmc_short_delayedupdate.in.xml
  1
  16
  TRUE
  0
  DIAMOND2_SCALARS # VMC
)

qmc_run_and_check(
  short-diamondC_2x1x1_hybridrep_pp-vmc_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short
  qmc_short_hybridrep.in.xml
  1
  4
  TRUE
  0
  DIAMOND2_SCALARS # VMC
)

# Reference DMC run in qmc-ref "-21.844975 0.001113"
list(APPEND DIAMOND2_DMC_SCALARS "totenergy" "-21.844975 0.02")
qmc_run_and_check(
  short-diamondC_2x1x1_pp-dmc_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short_vmc_dmc
  qmc_short_vmc_dmc.in.xml
  1
  16
  TRUE
  1
  DIAMOND2_DMC_SCALARS # DMC
)

# 1 rank 4 threads 16 walkers (4 crowds of 4 walkers)
list(APPEND DIAMOND2_DMC_SCALARS "totenergy" "-21.844975 0.02")
qmc_run_and_check(
  short-diamondC_2x1x1_pp-dmc_4r_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short_vmc_dmc_4r
  qmc_short_vmc_dmc_4r.in.xml
  1
  4
  TRUE
  1
  DIAMOND2_DMC_SCALARS # DMC
)

#16 batches of 16 walkers in one rank
qmc_run_and_check(
  short-diamondC_2x1x1_pp-vmcbatch_dmcbatch_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short_vmcbatch_dmcbatch
  qmc_short_vmcbatch_dmcbatch.in.xml
  1
  16
  TRUE
  1
  DIAMOND2_DMC_SCALARS # DMC
)

#4 batches of 16 walkers in one rank, batched slater det
qmc_run_and_check(
  short-diamondC_2x1x1_pp-vmcbatch_dmcbatch-4b_sdbatch_jas
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short_sdbatch_vmcbatch_dmcbatch
  qmc_short_sdbatch_vmcbatch_dmcbatch.in.xml
  1
  4
  TRUE
  1
  DIAMOND2_DMC_SCALARS # DMC
)

# 4 batches of 16 walkers over 4 ranks
qmc_run_and_check(
  short-diamondC_2x1x1_pp-vmcbatch_dmcbatch_4r_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short_vmcbatch_dmcbatch_4r
  qmc_short_vmcbatch_dmcbatch_4r.in.xml
  4
  4
  TRUE
  1
  DIAMOND2_DMC_SCALARS # DMC
)

list(APPEND DIAMOND2_DMC_SCALARS "totenergy" "-21.844975 0.01")
qmc_run_and_check(
  short-diamondC_2x1x1_pp-dmc-reconf_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short_vmc_dmc
  qmc_short_vmc_dmc_reconf.in.xml
  1
  16
  TRUE
  1
  DIAMOND2_DMC_SCALARS # DMC
)

# Reference DMC run as qmc-ref -21.858821 +/- 0.001207 with 2500 blocks
list(APPEND DIAMOND2_DMC_DLA_SCALARS "totenergy" "-21.858821 0.012")
qmc_run_and_check(
  short-diamondC_2x1x1_pp-dmc-dla_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short_vmc_dmc_dla
  qmc_short_vmc_dmc_dla.in.xml
  1
  16
  TRUE
  1
  DIAMOND2_DMC_DLA_SCALARS # DMC
)

# Excited state

list(APPEND DIAMOND2_EXCITED_SCALARS "totenergy" "-21.40982133 0.007277")
list(APPEND DIAMOND2_EXCITED_SCALARS "kinetic" "20.05962779 0.043556")
list(APPEND DIAMOND2_EXCITED_SCALARS "potential" "-41.46944912 0.044609")
list(APPEND DIAMOND2_EXCITED_SCALARS "eeenergy" "-5.45766881 0.012243")
list(APPEND DIAMOND2_EXCITED_SCALARS "ionion" "-25.55132697 0.00001")
list(APPEND DIAMOND2_EXCITED_SCALARS "localecp" "-12.00533349 0.051348")
list(APPEND DIAMOND2_EXCITED_SCALARS "nonlocalecp" "1.54488016 0.018282")
list(APPEND DIAMOND2_EXCITED_SCALARS "samples" "32000 0.0")

qmc_run_and_check(
  short-diamondC_2x1x1_pp-vmc_sdj_excited
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short_excited
  qmc_short_excited.in.xml
  1
  16
  TRUE
  0
  DIAMOND2_EXCITED_SCALARS # VMC
)

list(APPEND DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-21.60824284 0.011552")

qmc_run_and_check(
  short-diamondC_2x1x1_pp-dmc_sdj_excited
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_short_vmc_dmc_excited
  qmc_short_vmc_dmc_excited.in.xml
  1
  16
  TRUE
  1
  DIAMOND2_DMC_EXCITED_SCALARS # DMC
)

#
# Long tests
#

list(APPEND LONG_DIAMOND2_SCALARS "totenergy" "-21.668293 0.00023")
list(APPEND LONG_DIAMOND2_SCALARS "samples" "30720000 0.0")
list(APPEND LONG_DIAMOND2_SCALARS "flux" "0.0 0.05")

qmc_run_and_check(
  long-diamondC_2x1x1_pp-vmc_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_long
  qmc_long.in.xml
  1
  16
  TRUE
  0
  LONG_DIAMOND2_SCALARS # VMC
)

# Reference DMC run in qmc-ref "-21.844975 0.001113"
list(APPEND LONG_DIAMOND2_DMC_SCALARS "totenergy" "-21.844975 0.002879")
qmc_run_and_check(
  long-diamondC_2x1x1_pp-dmc_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_long_vmc_dmc
  qmc_long_vmc_dmc.in.xml
  1
  16
  TRUE
  1
  LONG_DIAMOND2_DMC_SCALARS # DMC
)

qmc_run_and_check(
  long-diamondC_2x1x1_pp-dmc-reconf_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_long_vmc_dmc
  qmc_long_vmc_dmc_reconf.in.xml
  1
  16
  TRUE
  1
  LONG_DIAMOND2_DMC_SCALARS # DMC
)

# Reference DMC run as qmc-ref -21.858821 +/- 0.001207 with 2500 blocks
list(APPEND LONG_DIAMOND2_DMC_DLA_SCALARS "totenergy" "-21.858821 0.0038")
qmc_run_and_check(
  long-diamondC_2x1x1_pp-dmc-dla_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_long_vmc_dmc_dla
  qmc_long_vmc_dmc_dla.in.xml
  1
  16
  TRUE
  1
  LONG_DIAMOND2_DMC_DLA_SCALARS # DMC
)

# Excited state
list(APPEND LONG_DIAMOND2_EXCITED_SCALARS "totenergy" "-21.40982133 0.000246")
list(APPEND LONG_DIAMOND2_EXCITED_SCALARS "samples" "30720000 0.0")
list(APPEND LONG_DIAMOND2_EXCITED_SCALARS "flux" "0.02048760 0.258691")

qmc_run_and_check(
  long-diamondC_2x1x1_pp-vmc_sdj_excited
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_long_excited
  qmc_long_excited.in.xml
  1
  16
  TRUE
  0
  LONG_DIAMOND2_EXCITED_SCALARS # VMC
)

list(APPEND LONG_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-21.60824284 0.003812")
qmc_run_and_check(
  long-diamondC_2x1x1_pp-dmc_sdj_excited
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  qmc_long_vmc_dmc_excited
  qmc_long_vmc_dmc_excited.in.xml
  1
  16
  TRUE
  1
  LONG_DIAMOND2_DMC_EXCITED_SCALARS # DMC
)

#
# Deterministic tests
#

# VMC RUN
if(QMC_MIXED_PRECISION)
  if(QMC_COMPLEX)
    list(APPEND DET_DIAMOND2_SCALARS "totenergy" "-22.30533101 0.00003531")
    list(APPEND DET_DIAMOND2_SCALARS "kinetic" "19.25970008 0.00012922")
    list(APPEND DET_DIAMOND2_SCALARS "potential" "-41.56500083 0.00009881")
    list(APPEND DET_DIAMOND2_SCALARS "eeenergy" "-7.25690848 0.00002388")
    list(APPEND DET_DIAMOND2_SCALARS "ionion" "-25.55133296 0.0000014")
    list(APPEND DET_DIAMOND2_SCALARS "localecp" "-10.85086697 0.00021079")
    list(APPEND DET_DIAMOND2_SCALARS "nonlocalecp" "2.09409341 0.00008703")
    list(APPEND DET_DIAMOND2_SCALARS "samples" "9.00000000 0.0")
    list(APPEND DET_DIAMOND2_SCALARS "kecorr" "0.030264591387 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "flux" "-5.34650349 0.00047629")
  else()
    list(APPEND DET_DIAMOND2_SCALARS "totenergy" "-22.30137427 0.00008588")
    list(APPEND DET_DIAMOND2_SCALARS "kinetic" "19.26598410 0.00014541")
    list(APPEND DET_DIAMOND2_SCALARS "potential" "-41.56735736 0.00007327")
    list(APPEND DET_DIAMOND2_SCALARS "eeenergy" "-7.25613581 0.00002740")
    list(APPEND DET_DIAMOND2_SCALARS "ionion" "-25.55133291 0.00000135")
    list(APPEND DET_DIAMOND2_SCALARS "localecp" "-10.85690056 0.00018856")
    list(APPEND DET_DIAMOND2_SCALARS "nonlocalecp" "2.09698211 0.00010037")
    list(APPEND DET_DIAMOND2_SCALARS "samples" "9.00000000 0.0")
    list(APPEND DET_DIAMOND2_SCALARS "kecorr" "0.030264591387 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "flux" "-5.36613862 0.00026178")
  endif()
else()
  if(QMC_COMPLEX)
    list(APPEND DET_DIAMOND2_SCALARS "totenergy" "-22.30530591 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "kinetic" "19.25965947 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "potential" "-41.56496539 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "eeenergy" "-7.25691718 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "ionion" "-25.55132676 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "localecp" "-10.85078393 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "nonlocalecp" "2.09406269 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "samples" "9.00000000 0.0")
    list(APPEND DET_DIAMOND2_SCALARS "kecorr" "0.030264591387 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "flux" "-5.34634371 0.000001")
  else()
    list(APPEND DET_DIAMOND2_SCALARS "totenergy" "-22.30137564 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "kinetic" "19.26597773 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "potential" "-41.56735337 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "eeenergy" "-7.25613869 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "ionion" "-25.55132676 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "localecp" "-10.85686146 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "nonlocalecp" "2.09697376 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "samples" "9.00000000 0.0")
    list(APPEND DET_DIAMOND2_SCALARS "kecorr" "0.030264591387 0.000001")
    list(APPEND DET_DIAMOND2_SCALARS "flux" "-5.36609515 0.000001")
  endif()

  #  QMC_RUN_AND_CHECK(deterministic-diamondC_2x1x1_pp-vmcbatch_sdj
  #                    "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  #                    det_qmc_short
  #                    det_qmc_short_vmcbatch.in.xml
  #                    1 1
  #                    TRUE
  #                    0 DET_DIAMOND2_SCALARS # VMC
  #                    )

endif()

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmc_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short
  det_qmc_short.in.xml
  1
  1
  TRUE
  0
  DET_DIAMOND2_SCALARS # VMC
)

if(QMC_MIXED_PRECISION)
  if(QMC_COMPLEX)
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "totenergy" "-20.89975510 0.00003607")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "kinetic" "19.81050328 0.00005723")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "potential" "-40.71023491 0.00004795")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "eeenergy" "-4.88692256 0.00001674")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "ionion" "-25.55133347 0.0000014")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "localecp" "-12.28339315 0.00005318")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "nonlocalecp" "2.01141963 0.00000726")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "samples" "9.00000000 0.0")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "flux" "-4.27897453 0.00047829")
  else()
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "totenergy" "-20.90188936 0.00002587")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "kinetic" "19.80808002 0.00006011")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "potential" "-40.71000239 0.00004784")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "eeenergy" "-4.88667164 0.00001946")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "ionion" "-25.55133347 0.00000135")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "localecp" "-12.28328453 0.00004867")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "nonlocalecp" "2.01130431 0.00000802")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "samples" "9.00000000 0.0")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "flux" "-4.27510325 0.0005331")
  endif()
else()
  if(QMC_COMPLEX)
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "totenergy" "-20.89973004 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "kinetic" "19.81049790 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "potential" "-40.71022794 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "eeenergy" "-4.88692549 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "ionion" "-25.55132759 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "localecp" "-12.28339508 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "nonlocalecp" "2.01141941 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "samples" "9.00000000 0.0")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "flux" "-4.27897265 0.000001")
  else()
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "totenergy" "-20.90189047 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "kinetic" "19.80809983 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "potential" "-40.70999030 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "eeenergy" "-4.88666485 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "ionion" "-25.55132759 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "localecp" "-12.28329977 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "nonlocalecp" "2.01130109 0.000001")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "samples" "9.00000000 0.0")
    list(APPEND DET_DIAMOND2_EXCITED_SCALARS "flux" "-4.27513066 0.000001")
  endif()
endif()

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmc_sdj_excited
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_excited
  det_qmc_short_excited.in.xml
  1
  1
  TRUE
  0
  DET_DIAMOND2_EXCITED_SCALARS # VMC
)

# VMC DELAYED-UPDATE
if(QMC_MIXED_PRECISION)
  if(QMC_COMPLEX)
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "totenergy" "-20.94830746 0.00001857")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "kinetic" "16.53206588 0.00002208")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "potential" "-37.48037247 0.00002475")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "eeenergy" "-4.25515637 0.00000418")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "ionion" "-25.55133296 0.0000014")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "localecp" "-9.39410011 0.00002983")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "nonlocalecp" "1.72022581 0.0000045")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "samples" "9.00000000 0.0")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "flux" "-12.47276797 0.00007329")
  else()
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "totenergy" "-20.94466442 0.0000242")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "kinetic" "16.53548278 0.00002493")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "potential" "-37.48014302 0.00002767")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "eeenergy" "-4.25504497 0.00000506")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "ionion" "-25.55133291 0.00000135")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "localecp" "-9.39386018 0.00002929")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "nonlocalecp" "1.72009549 0.0000045")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "samples" "9.00000000 0.0")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "flux" "-12.48033341 0.00006604")
  endif()
else()
  if(QMC_COMPLEX)
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "totenergy" "-20.94830517 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "kinetic" "16.53205375 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "potential" "-37.48035891 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "eeenergy" "-4.25515766 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "ionion" "-25.55132676 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "localecp" "-9.39410085 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "nonlocalecp" "1.72022658 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "samples" "9.00000000 0.0")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "flux" "-12.47274689 0.000001")
  else()
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "totenergy" "-20.94466713 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "kinetic" "16.53547309 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "potential" "-37.48014022 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "eeenergy" "-4.25504502 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "ionion" "-25.55132676 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "localecp" "-9.39386209 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "nonlocalecp" "1.72009386 0.000001")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "samples" "9.00000000 0.0")
    list(APPEND DET_DIAMOND2_DELAY_SCALARS "flux" "-12.48031692 0.000001")
  endif()
endif()

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-delayed_update-vmc_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short
  det_qmc_short_delayedupdate.in.xml
  1
  1
  TRUE
  0
  DET_DIAMOND2_DELAY_SCALARS # VMC
)

# DMC RUN
if(QMC_MIXED_PRECISION)
  if(QMC_COMPLEX)
    list(APPEND DET_DIAMOND2_DMC_SCALARS "totenergy" "-21.03726740 0.00001029")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "kinetic" "22.67695498 0.00001003")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "potential" "-43.71422745 0.00000515")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "eeenergy" "-6.17624904 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "ionion" "-25.55133296 0.0000014")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "localecp" "-9.10928079 0.00000442")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "nonlocalecp" "-2.87736895 0.00000177")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "samples" "9.00000000 0.0")
  else()
    list(APPEND DET_DIAMOND2_DMC_SCALARS "totenergy" "-21.04527459 0.00001462")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "kinetic" "22.66898761 0.00001749")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "potential" "-43.71426623 0.00000912")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "eeenergy" "-6.17623877 0.00000144")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "ionion" "-25.55133291 0.00000135")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "localecp" "-9.10933337 0.00000562")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "nonlocalecp" "-2.87736218 0.00000442")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "samples" "9.00000000 0.0")
  endif()
else()
  if(QMC_COMPLEX)
    list(APPEND DET_DIAMOND2_DMC_SCALARS "totenergy" "-21.03727496 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "kinetic" "22.67697372 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "potential" "-43.71424868 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "eeenergy" "-6.17624438 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "ionion" "-25.55132676 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "localecp" "-9.10929967 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "nonlocalecp" "-2.87737760 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "samples" "9.00000000 0.0")
  else()
    list(APPEND DET_DIAMOND2_DMC_SCALARS "totenergy" "-21.04527554 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "kinetic" "22.66901302 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "potential" "-43.71428856 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "eeenergy" "-6.17624150 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "ionion" "-25.55132676 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "localecp" "-9.10934270 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "nonlocalecp" "-2.87737733 0.000001")
    list(APPEND DET_DIAMOND2_DMC_SCALARS "samples" "9.00000000 0.0")
  endif()
endif()

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-dmc_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_vmc_dmc
  det_qmc_short_vmc_dmc.in.xml
  1
  1
  TRUE
  1
  DET_DIAMOND2_DMC_SCALARS # DMC
)

if(QMC_MIXED_PRECISION)
  if(QMC_COMPLEX)
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-20.05521495 0.00003")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "kinetic" "24.80059962 0.00002563")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "potential" "-44.85581823 0.00000861")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "eeenergy" "-5.88258978 0.00000192")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "ionion" "-25.55133347 0.0000014")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "localecp" "-16.39535242 0.00000777")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "nonlocalecp" "2.97345613 0.00001229")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "samples" "9.00000000 0.0")
  else()
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-20.06701300 0.00003")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "kinetic" "24.78874085 0.00002343")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "potential" "-44.85577373 0.00001142")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "eeenergy" "-5.88258752 0.00000163")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "ionion" "-25.55133347 0.00000135")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "localecp" "-16.39536396 0.00001074")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "nonlocalecp" "2.97349421 0.00001354")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "samples" "9.00000000 0.0")
  endif()
else()
  if(QMC_COMPLEX)
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-20.05523691 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "kinetic" "24.80059874 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "potential" "-44.85583564 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "eeenergy" "-5.88258720 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "ionion" "-25.55132759 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "localecp" "-16.39537067 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "nonlocalecp" "2.97344902 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "samples" "9.00000000 0.0")
  else()
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "totenergy" "-20.06704958 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "kinetic" "24.78873011 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "potential" "-44.85577969 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "eeenergy" "-5.88258525 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "ionion" "-25.55132759 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "localecp" "-16.39536387 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "nonlocalecp" "2.97349622 0.000001")
    list(APPEND DET_DIAMOND2_DMC_EXCITED_SCALARS "samples" "9.00000000 0.0")
  endif()
endif()

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-dmc_sdj_excited
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_vmc_dmc_excited
  det_qmc_short_vmc_dmc_excited.in.xml
  1
  1
  TRUE
  1
  DET_DIAMOND2_DMC_EXCITED_SCALARS # DMC
)

if(QMC_MIXED_PRECISION)
  if(QMC_COMPLEX)
    # Cycle 1
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "totenergy" "-22.04961268 0.0005")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "kinetic" "19.21103034 0.0005")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "potential" "-41.26064989 0.0001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "eeenergy" "-6.68405093 0.00003")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "localecp" "-10.92577863 0.0002")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "nonlocalecp" "1.90051359 0.0001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "flux" "-0.31336816 0.001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "samples" "18.00000000 0.0")
    #Cycle 2
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "totenergy" "-21.30130291 0.0005")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "kinetic" "19.77013829 0.0005")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "potential" "-41.07208174 0.0001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "eeenergy" "-6.35883147 0.00003")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "localecp" "-10.53491810 0.0002")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "nonlocalecp" "1.37300099 0.0001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "flux" "-9.80945206 0.001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "samples" "18.00000000 0.0")
  else()
    #Cycle 1
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "totenergy" "-22.05032857 0.0005")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "kinetic" "19.21031605 0.0005")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "potential" "-41.26065015 0.0001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "eeenergy" "-6.68405093 0.00003")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "localecp" "-10.92577863 0.0002")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "nonlocalecp" "1.90051333 0.0001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "flux" "-0.31142934 0.001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "samples" "18.00000000 0.0")
    #Cycle 2
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "totenergy" "-21.31027285 0.0005")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "kinetic" "19.76116869 0.0005")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "potential" "-41.07208140 0.0001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "eeenergy" "-6.35883147 0.00003")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "localecp" "-10.53491810 0.0002")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "nonlocalecp" "1.37300133 0.0001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "flux" "-9.79154968 0.001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "samples" "18.00000000 0.0")
  endif()
else()
  if(QMC_COMPLEX)
    #Cycle 1
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "totenergy" "-22.04960550 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "kinetic" "19.21103957 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "potential" "-41.26064507 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "eeenergy" "-6.68404915 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "localecp" "-10.92578832 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "nonlocalecp" "1.90051926 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "flux" "-0.31336458 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "samples" "18.00000000 0.0")
    #Cycle 2
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "totenergy" "-21.30193945 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "kinetic" "19.77014450 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "potential" "-41.07208395 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "eeenergy" "-6.35882865 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "localecp" "-10.53492678 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "nonlocalecp" "1.37299835 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "flux" "-9.80949941 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "samples" "18.00000000 0.0")
  else()
    #Cycle 1
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "totenergy" "-22.05031517 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "kinetic" "19.21032487 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "potential" "-41.26064004 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "eeenergy" "-6.68404915 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "localecp" "-10.92578832 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "nonlocalecp" "1.90052429 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "flux" "-0.31141016 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS "samples" "18.00000000 0.0")
    #Cycle 2
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "totenergy" "-21.31090193 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "kinetic" "19.76117659 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "potential" "-41.07207852 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "eeenergy" "-6.35882865 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "localecp" "-10.53492678 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "nonlocalecp" "1.37300379 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "flux" "-9.79159774 0.000001")
    list(APPEND DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS "samples" "18.00000000 0.0")
  endif()
endif()

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-mwalkers_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_vmcbatch_mwalkers
  det_qmc_short_vmcbatch_mwalkers.in.xml
  1
  1
  TRUE
  0
  DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS # VMC cycle 1
  1
  DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS # VMC cycle 2
)

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-mwalkers_sdbatch_jas
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_sdbatch_vmcbatch_mwalkers
  det_qmc_short_sdbatch_vmcbatch_mwalkers.in.xml
  1
  1
  TRUE
  0
  DET_DIAMOND2_VMC_BATCH_MWALKERS1_SCALARS # VMC cycle 1
  1
  DET_DIAMOND2_VMC_BATCH_MWALKERS2_SCALARS # VMC cycle 2
)

if(QMC_MIXED_PRECISION)
  if(QMC_COMPLEX)
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "totenergy" "-21.75695352 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "kinetic" "21.58412194 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "potential" "-43.34107537 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "eeenergy" "-4.93051914 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "localecp" "-14.55016309 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "nonlocalecp" "1.69094030 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "flux" "14.56015197 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "totenergy" "-21.40819399 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "kinetic" "21.75835414 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "potential" "-43.16599791 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "eeenergy" "-5.31127989 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "localecp" "-13.83088578 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "nonlocalecp" "1.52749084 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "flux" "1.55142989 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "samples" "144 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "totenergy" "-21.76355918 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "kinetic" "24.31653559 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "potential" "-46.08009462 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "eeenergy" "-5.15140370 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "localecp" "-17.32746386 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "nonlocalecp" "1.95010638 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "flux" "-15.81523996 0.001")
  else()
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "totenergy" "-21.76487128 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "kinetic" "20.67891363 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "potential" "-42.44378484 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "eeenergy" "-4.97687774 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "localecp" "-13.97216887 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "nonlocalecp" "2.05659522 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "flux" "22.16100872 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "totenergy" "-21.34835919 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "kinetic" "22.16238919 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "potential" "-43.50991019 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "eeenergy" "-5.07821053 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "localecp" "-14.40620204 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "nonlocalecp" "1.52584469 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "flux" "1.35192553 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "samples" "144.00000000 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "totenergy" "-21.72500894 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "kinetic" "24.02746675 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "potential" "-45.75247577 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "eeenergy" "-5.05948524 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "localecp" "-16.92160668 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "nonlocalecp" "1.77994960 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "flux" "-15.34938772 0.001")
  endif()
else()
  if(QMC_COMPLEX)
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "totenergy" "-21.77929369 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "kinetic" "22.07862416 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "potential" "-43.85791786 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "eeenergy" "-4.98351398 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "localecp" "-14.61422806 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "nonlocalecp" "1.29115107 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "flux" "-10.01746831 0.00001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "totenergy" "-21.64814406 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "kinetic" "21.77217213 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "potential" "-43.42031618 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "eeenergy" "-4.73027440 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "localecp" "-14.29275394 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "nonlocalecp" "1.15403904 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "flux" "-1.54466089 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "samples" "144 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "totenergy" "-21.45553363 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "kinetic" "20.81021279 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "potential" "-42.26574643 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "eeenergy" "-4.20979989 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "localecp" "-12.61049505 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "nonlocalecp" "0.10587678 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "flux" "-4.19781920 0.000001")
  else()
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "totenergy" "-21.77643336 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "kinetic" "22.08147768 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "potential" "-43.85791104 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "eeenergy" "-4.98351398 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "localecp" "-14.61422806 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "nonlocalecp" "1.29115788 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "flux" "-10.02287436 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS "samples" "144 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "totenergy" "-21.64720862 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "kinetic" "21.77346471 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "potential" "-43.42067333 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "eeenergy" "-4.73021029 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "localecp" "-14.29312925 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "nonlocalecp" "1.15399309 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "flux" "-1.54298684 0.00001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS "samples" "144.00000000 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "totenergy" "-21.45957106 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "kinetic" "20.80698636 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "potential" "-42.26655742 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "eeenergy" "-4.20985092 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "localecp" "-12.61110393 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "nonlocalecp" "0.10572588 0.00001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS "flux" "-4.18813112 0.00001")
  endif()
endif()

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-dmcbatch-mwalkers_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_vmcbatch_dmcbatch_mwalkers
  det_qmc_short_vmcbatch_dmcbatch_mwalkers.in.xml
  1
  4
  TRUE
  0
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS # VMC without drift
  1
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS # VMC with drift
  2
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS # DMC
)

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-dmcbatch-mwalkers-serialized_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_vmcbatch_dmcbatch_mwalkers_serialized
  det_qmc_short_vmcbatch_dmcbatch_mwalkers_serialized.in.xml
  1
  4
  TRUE
  0
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS # VMC without drift
  1
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS # VMC with drift
  2
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS # DMC
)

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-dmcbatch-mwalkers_sdbatch_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_sdbatch_vmcbatch_dmcbatch_mwalkers
  det_qmc_short_sdbatch_vmcbatch_dmcbatch_mwalkers.in.xml
  1
  4
  TRUE
  0
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS # VMC without drift
  1
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS # VMC with drift
  2
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS # DMC
)

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-dmcbatch-mwalkers-checks_sdbatch_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_sdbatch_vmcbatch_dmcbatch_mwalkers
  det_qmc_short_sdbatch_vmcbatch_dmcbatch_mwalkers_with_checks.in.xml
  1
  4
  TRUE
  0
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_1_SCALARS # VMC without drift
  1
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_2_SCALARS # VMC with drift
  2
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t4_3_SCALARS # DMC
)

if(QMC_MIXED_PRECISION)
  if(QMC_COMPLEX)
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "totenergy" "-21.58341272 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "kinetic" "19.37229488 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "potential" "-40.95570760 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "eeenergy" "-5.29734575 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "localecp" "-11.85045674 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "nonlocalecp" "1.74342834 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "flux" "-6.02205066 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "totenergy" "-21.76467747 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "kinetic" "19.49291275 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "potential" "-41.25801003 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "eeenergy" "-5.74480542 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "localecp" "-11.45744019 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "nonlocalecp" "1.49558003 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "flux" "-1.28278001 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "samples" "144.00000000 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "totenergy" "-22.22433395 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "kinetic" "19.10457607 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "potential" "-41.32836692 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "eeenergy" "-5.53681243 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "localecp" "-12.48670659 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "nonlocalecp" "2.24647505 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "flux" "-6.00048904 0.001")
  else()
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "totenergy" "-21.58530618 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "kinetic" "19.37039175 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "potential" "-40.95569793 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "eeenergy" "-5.29734575 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "localecp" "-11.85045674 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "nonlocalecp" "1.74343801 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "flux" "-6.01896369 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "totenergy" "-21.76315171 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "kinetic" "19.49451168 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "potential" "-41.25805477 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "eeenergy" "-5.74484542 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "localecp" "-11.45746322 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "nonlocalecp" "1.49557430 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "flux" "-1.29073155 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "samples" "144.00000000 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "totenergy" "-22.22611131 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "kinetic" "19.10316757 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "potential" "-41.32873326 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "eeenergy" "-5.53677170 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "ionion" "-25.55133345 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "localecp" "-12.48674850 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "nonlocalecp" "2.24611461 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "flux" "-5.99726842 0.001")
  endif()
else()
  if(QMC_COMPLEX)
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "totenergy" "-21.69126886 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "kinetic" "19.62048294 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "potential" "-41.31175180 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "eeenergy" "-5.78662718 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "localecp" "-12.25902950 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "nonlocalecp" "2.28523175 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "flux" "-2.60864883 0.00001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "totenergy" "-21.76410217 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "kinetic" "20.42744622 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "potential" "-42.19154839 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "eeenergy" "-5.74796574 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "localecp" "-12.53877422 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "nonlocalecp" "1.64651845 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "flux" "-6.56613667 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "samples" "144 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "totenergy" "-21.96273592 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "kinetic" "19.86537300 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "potential" "-41.82810772 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "eeenergy" "-5.92974620 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "localecp" "-12.66623722 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "nonlocalecp" "2.31920253 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "flux" "-5.04728191 0.000001")
  else()
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "totenergy" "-21.69343607 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "kinetic" "19.61830510 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "potential" "-41.31174117 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "eeenergy" "-5.78662718 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "localecp" "-12.25902950 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "nonlocalecp" "2.28524238 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "flux" "-2.60446436 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS "samples" "144.0000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "totenergy" "-21.76460322 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "kinetic" "20.42746547 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "potential" "-42.19206869 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "eeenergy" "-5.74793018 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "localecp" "-12.53946292 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "nonlocalecp" "1.64665128 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "flux" "-6.56446708 0.00001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS "samples" "144.00000000 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "totenergy" "-21.96271590 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "kinetic" "19.86641464 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "potential" "-41.82912952 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "eeenergy" "-5.92974087 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "localecp" "-12.66715852 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "nonlocalecp" "2.31906900 0.00001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS "flux" "-5.04892071 0.00001")
  endif()
endif()

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-dmcbatch-mwalkers_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_vmcbatch_dmcbatch_mwalkers
  det_qmc_short_vmcbatch_dmcbatch_mwalkers.in.xml
  1
  16
  TRUE
  0
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS # VMC without drift
  1
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS # VMC with drift
  2
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS # DMC
)

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-dmcbatch-mwalkers_sdbatch_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_sdbatch_vmcbatch_dmcbatch_mwalkers
  det_qmc_short_sdbatch_vmcbatch_dmcbatch_mwalkers.in.xml
  1
  16
  TRUE
  0
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_1_SCALARS # VMC without drift
  1
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_2_SCALARS # VMC with drift
  2
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r1-t16_3_SCALARS # DMC
)

if(QMC_MIXED_PRECISION)
  if(QMC_COMPLEX)
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "totenergy" "-21.58019753 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "kinetic" "19.06962113 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "potential" "-40.64912620 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "eeenergy" "-4.95910877 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "ionion" "-25.55133363 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "localecp" "-11.60386802 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "nonlocalecp" "1.46518242 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "flux" "9.88474603 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "totenergy" "-21.41726768 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "kinetic" "21.53688965 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "potential" "-42.95347106 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "eeenergy" "-5.02230991 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "ionion" "-25.55133363 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "localecp" "-13.10442235 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "nonlocalecp" "0.72460984 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "flux" "-12.59165665 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "samples" "144.00000000 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "totenergy" "-21.58100325 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "kinetic" "21.97625898 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "potential" "-43.55726217 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "eeenergy" "-5.25263408 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "ionion" "-25.55133363 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "localecp" "-14.40418877 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "nonlocalecp" "1.65089413 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "flux" "-10.97538990 0.001")
  else()
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "totenergy" "-21.58034154 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "kinetic" "19.06945306 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "potential" "-40.64908701 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "eeenergy" "-4.95910877 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "ionion" "-25.55133363 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "localecp" "-11.60386802 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "nonlocalecp" "1.46522161 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "flux" "9.88054883 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "totenergy" "-21.41383354 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "kinetic" "21.54062110 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "potential" "-42.95374255 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "eeenergy" "-5.02235546 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "ionion" "-25.55133363 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "localecp" "-13.10432010 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "nonlocalecp" "0.72425784 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "flux" "-12.59721251 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "samples" "144.00000000 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "totenergy" "-21.57967929 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "kinetic" "21.97767070 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "potential" "-43.55734994 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "eeenergy" "-5.25255007 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "ionion" "-25.55133363 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "localecp" "-14.40431020 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "nonlocalecp" "1.65084377 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "flux" "-10.97712288 0.001")
  endif()
else()
  if(QMC_COMPLEX)
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "totenergy" "-21.65227220 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "kinetic" "19.03441381 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "potential" "-40.68668601 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "eeenergy" "-5.28791536 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "ionion" "-25.55132706 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "localecp" "-11.38769047 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "nonlocalecp" "1.54024674 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "flux" "-10.19903930 0.00001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "totenergy" "-21.57222946 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "kinetic" "21.98319329 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "potential" "-43.55542275 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "eeenergy" "-4.55367707 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "ionion" "-25.55132706 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "localecp" "-14.68276787 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "nonlocalecp" "1.23234910 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "flux" "-7.10804334 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "samples" "144 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "totenergy" "-21.52125294 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "kinetic" "19.23591868 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "potential" "-40.75717161 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "eeenergy" "-5.38158923 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "localecp" "-11.78892084 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "nonlocalecp" "1.96466408 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "flux" "0.28123450 0.000001")
  else()
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "totenergy" "-21.65143365 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "kinetic" "19.03525227 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "potential" "-40.68668591 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "eeenergy" "-5.28791536 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "ionion" "-25.55132706 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "localecp" "-11.38769047 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "nonlocalecp" "1.54024683 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "flux" "-10.20067791 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "totenergy" "-21.56912218 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "kinetic" "21.98663172 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "potential" "-43.55575391 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "eeenergy" "-4.55372868 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "ionion" "-25.55132706 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "localecp" "-14.68286398 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "nonlocalecp" "1.23216566 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "flux" "-7.11570289 0.00001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS "samples" "144.00000000 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "totenergy" "-21.52069728 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "kinetic" "19.23677962 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "potential" "-40.75747690 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "eeenergy" "-5.38153225 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "localecp" "-11.78962654 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "nonlocalecp" "1.96500747 0.00001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS "flux" "0.28086537 0.00001")
  endif()
endif()

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-dmcbatch-mwalkers_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_vmcbatch_dmcbatch_mwalkers
  det_qmc_short_vmcbatch_dmcbatch_mwalkers.in.xml
  2
  2
  TRUE
  0
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS # VMC without drift
  1
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS # VMC with drift
  2
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS # DMC
)

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-dmcbatch-mwalkers_sdbatch_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_sdbatch_vmcbatch_dmcbatch_mwalkers
  det_qmc_short_sdbatch_vmcbatch_dmcbatch_mwalkers.in.xml
  2
  2
  TRUE
  0
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_1_SCALARS # VMC without drift
  1
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_2_SCALARS # VMC with drift
  2
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t2_3_SCALARS # DMC
)

if(QMC_MIXED_PRECISION)
  if(QMC_COMPLEX)
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "totenergy" "-21.71827114 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "kinetic" "20.19340480 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "potential" "-41.91131606 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "eeenergy" "-4.94686188 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "ionion" "-25.55133363 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "localecp" "-13.34477165 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "nonlocalecp" "1.93165028 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "flux" "-10.14767210 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "totenergy" "-21.98993631 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "kinetic" "21.53819515 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "potential" "-43.52735438 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "eeenergy" "-5.77073014 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "ionion" "-25.55133363 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "localecp" "-13.96799663 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "nonlocalecp" "1.76270731 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "flux" "2.38005678 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "samples" "144.00000000 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "totenergy" "-21.98443887 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "kinetic" "21.24965809 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "potential" "-43.23329602 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "eeenergy" "-5.54241465 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "ionion" "-25.55133363 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "localecp" "-14.52283021 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "nonlocalecp" "2.38327034 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "flux" "0.18637741 0.001")
  else()
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "totenergy" "-21.71738267 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "kinetic" "20.19428493 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "potential" "-41.91131162 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "eeenergy" "-4.94686188 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "ionion" "-25.55133363 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "localecp" "-13.34477165 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "nonlocalecp" "1.93165472 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "flux" "-10.14942551 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "totenergy" "-21.99092404 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "kinetic" "21.53710746 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "potential" "-43.52725913 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "eeenergy" "-5.77057594 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "ionion" "-25.55133363 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "localecp" "-13.96787348 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "nonlocalecp" "1.76250879 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "flux" "2.38866285 0.001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "samples" "144.00000000 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "totenergy" "-21.98218308 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "kinetic" "21.25165864 0.0005")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "potential" "-43.23306179 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "eeenergy" "-5.54248445 0.00003")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "ionion" "-25.55133363 0.000002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "localecp" "-14.52254631 0.0002")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "nonlocalecp" "2.38328871 0.0001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "flux" "0.17778549 0.001")
  endif()
else()
  if(QMC_COMPLEX)
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "totenergy" "-21.68065603 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "kinetic" "20.16256817 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "potential" "-41.84322421 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "eeenergy" "-4.90964385 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "ionion" "-25.55132706 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "localecp" "-13.25550100 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "nonlocalecp" "1.87324755 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "flux" "-8.99093561 0.00001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "totenergy" "-21.81768311 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "kinetic" "19.42117537 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "potential" "-41.23885848 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "eeenergy" "-5.43148508 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "ionion" "-25.55132706 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "localecp" "-11.91172090 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "nonlocalecp" "1.65567442 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "flux" "1.80616014 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "samples" "144.00000000 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "totenergy" "-21.89178478 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "kinetic" "18.94622059 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "potential" "-40.83800537 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "eeenergy" "-5.29808352 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "localecp" "-12.58587015 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "nonlocalecp" "2.59727523 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "flux" "-0.63238427 0.000001")
  else()
    # VMC without drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "totenergy" "-21.67955990 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "kinetic" "20.16365667 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "potential" "-41.84321657 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "eeenergy" "-4.90964385 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "ionion" "-25.55132706 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "localecp" "-13.25550100 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "nonlocalecp" "1.87325519 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "flux" "-8.99299657 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS "samples" "144.00000000 0.0")
    # VMC with drift
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "totenergy" "-21.81858401 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "kinetic" "19.42053111 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "potential" "-41.23911512 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "eeenergy" "-5.43133155 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "ionion" "-25.55132706 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "localecp" "-11.91199362 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "nonlocalecp" "1.65553696 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "flux" "1.81290367 0.00001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS "samples" "144.00000000 0.0")
    # DMC
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "totenergy" "-21.89306638 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "kinetic" "18.94520977 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "potential" "-40.83827614 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "eeenergy" "-5.29804535 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "ionion" "-25.55132719 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "localecp" "-12.58640579 0.000001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "nonlocalecp" "2.59750192 0.00001")
    list(APPEND DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS "flux" "-0.63118216 0.00001")
  endif()
endif()

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-dmcbatch-mwalkers_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_vmcbatch_dmcbatch_mwalkers
  det_qmc_short_vmcbatch_dmcbatch_mwalkers.in.xml
  2
  3
  TRUE
  0
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS # VMC without drift
  1
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS # VMC with drift
  2
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS # DMC
)

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-dmcbatch-mwalkers_inverter-host_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_vmcbatch_dmcbatch_mwalkers
  det_qmc_short_vmcbatch_dmcbatch_mwalkers_inverter_host.in.xml
  2
  3
  TRUE
  0
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS # VMC without drift
  1
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS # VMC with drift
  2
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS # DMC
)

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-dmcbatch-mwalkers_sdbatch_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_sdbatch_vmcbatch_dmcbatch_mwalkers
  det_qmc_short_sdbatch_vmcbatch_dmcbatch_mwalkers.in.xml
  2
  3
  TRUE
  0
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS # VMC without drift
  1
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS # VMC with drift
  2
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS # DMC
)

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-vmcbatch-dmcbatch-mwalkers_sdbatch_inverter-host_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_sdbatch_vmcbatch_dmcbatch_mwalkers
  det_qmc_short_sdbatch_vmcbatch_dmcbatch_mwalkers_inverter_host.in.xml
  2
  3
  TRUE
  0
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_1_SCALARS # VMC without drift
  1
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_2_SCALARS # VMC with drift
  2
  DET_DIAMOND2_VMC_DMC_BATCH_MWALKERS-r2-t3_3_SCALARS # DMC
)

if(QMC_MIXED_PRECISION)
  if(QMC_COMPLEX)
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "totenergy" "-20.94280618 0.00002128")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "kinetic" "17.47436757 0.00002563")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "potential" "-38.41717159 0.00000861")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "eeenergy" "-5.71276953 0.00000192")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "ionion" "-25.55133347 0.0000014")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "localecp" "-8.33530885 0.00000777")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "nonlocalecp" "1.18224586 0.00001229")
  else()
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "totenergy" "-20.94247999 0.00001859")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "kinetic" "17.47460491 0.00002343")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "potential" "-38.41708469 0.00001142")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "eeenergy" "-5.71281757 0.00000163")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "ionion" "-25.55133347 0.00000135")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "localecp" "-8.33525669 0.00001074")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "nonlocalecp" "1.18232314 0.00001354")
  endif()
else()
  if(QMC_COMPLEX)
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "totenergy" "-21.09584624 0.000001")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "kinetic" "15.78742199 0.000001")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "potential" "-36.88326823 0.000001")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "eeenergy" "-5.83551369 0.000001")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "ionion" "-25.55132759 0.000001")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "localecp" "-6.20246609 0.000001")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "nonlocalecp" "0.70603624 0.000001")
  else()
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "totenergy" "-21.09320399 0.000001")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "kinetic" "15.79004300 0.000001")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "potential" "-36.88324699 0.000001")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "eeenergy" "-5.83551803 0.000001")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "ionion" "-25.55132759 0.000001")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "localecp" "-6.20243325 0.000001")
    list(APPEND DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS "nonlocalecp" "0.70602897 0.000001")
  endif()
endif()

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-dmcbatch_sdj_excited
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_short_vmcbatch_dmcbatch_excited
  det_qmc_short_vmcbatch_dmcbatch_excited.in.xml
  1
  1
  TRUE
  1
  DET_DIAMOND2_DMC_BATCH_EXCITED_SCALARS # DMC
)

if(QMC_MIXED_PRECISION)
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "totenergy" "-14.12658181 0.00001462")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "kinetic" "17.30728109 0.00001749")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "potential" "-31.43386071 0.00000912")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "eeenergy" "-5.82744511 0.00000144")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "ionion" "-25.55133371 0.00000135")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "localecp" "-2.73935358 0.00000562")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "nonlocalecp" "2.68426957 0.00000442")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "samples" "151 0.0")
else()
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "totenergy" "-14.12657824 0.000001")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "kinetic" "17.30727697 0.000001")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "potential" "-31.43385521 0.000001")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "eeenergy" "-5.82744518 0.000001")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "ionion" "-25.55132719 0.000001")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "localecp" "-2.73935077 0.000001")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "nonlocalecp" "2.68426763 0.000001")
  list(APPEND DET_DIAMOND2_DMC_PW_SCALARS "samples" "151.00000000 0.0")
endif()

qmc_run_and_check(
  deterministic-diamondC_2x1x1_pp-dmc_pw_sdj
  "${qmcpack_SOURCE_DIR}/tests/solids/diamondC_2x1x1_pp"
  det_qmc_vmc_dmc_pw
  det_qmc_vmc_dmc_pw.in.xml
  1
  1
  TRUE
  1
  DET_DIAMOND2_DMC_PW_SCALARS # dMC
)
