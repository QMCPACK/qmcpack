\NeedsTeXFormat{LaTeX2e}
\RequirePackage{xcolor}
\RequirePackage{listings}
\ProvidesPackage{qmcpack_listings}

\lstloadlanguages{C++,XML,Python,bash}

\lstdefinestyle{C++}{language=C++,
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=\color{blue}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  commentstyle=\color{gray}\ttfamily,
  morecomment=[l][\color{magenta}]{\#},
  breaklines=true,
  breakatwhitespace=true,
  frame=tlrb
  frameround=ftft
}

\lstdefinestyle{Python}{language=Python,
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=\color{blue}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  commentstyle=\color{gray}\ttfamily,
  morecomment=[l][\color{magenta}]{\#},
  breaklines=true,
  breakatwhitespace=true,
  showstringspaces=false,
  keepspaces=true,
  frame=tlrb
  frameround=ftft
}

\lstdefinestyle{QMCPXML}{language=XML, 
  basicstyle=\footnotesize\ttfamily,  % copy/paste from pdf w/o mangled quotes
  keywordstyle=\color{espblue}\bfseries,
  backgroundcolor=\color{verbgray},
  markfirstintag=true,
  stringstyle=\color{espred},
  frame=tlrb,
  frameround=ftft,
  breaklines=true,
  breakatwhitespace=true,
  escapeinside={<:}{:>},
  columns=fullflexible,   % copy/paste from pdf w/o added spaces
  keepspaces=true,        % but do keep the spaces that are already there
  showstringspaces=false, % avoid showing underbrackets in quoted text
}

\definecolor{verbgray}{gray}{0.9}

\lstdefinestyle{SHELL}{language=bash,
  basicstyle=\ttfamily\footnotesize,
  backgroundcolor=\color{verbgray},
  breaklines=true,
  breakatwhitespace=true,
  columns=fullflexible,   % copy/paste from pdf w/o added spaces
  keepspaces=true,        % but do keep the spaces that are already there
  showstringspaces=false, % avoid showing underbrackets in quoted text
}

\lstnewenvironment{shade}{
  \lstset{backgroundcolor=\color{verbgray},
    language=csh,
    extendedchars=true,
    frame=single,
    framerule=0pt,
    basicstyle=\ttfamily\footnotesize,
    breaklines=true,
    breakatwhitespace=true,
    columns=fullflexible,
    keepspaces=true,
    showstringspaces=false,
    escapeinside={\%*}{*},}}
    {}

\definecolor{espred}{rgb}{1,0,0}
\definecolor{espblue}{rgb}{0,0,1}
\lstdefinelanguage{espresso}
{ keywords={SYSTEM,ELECTRONS,ATOMIC_SPECIES,ATOMIC_POSITIONS,K_POINTS,CONTROL,CELL_PARAMETERS,},
  keywordstyle=\color{espred},
  keywords=[3]{calculation,restart_mode,prefix,outdir,pseudo_dir,disk_io,wf_collect,},
  keywordstyle=[3]\color{espblue},
  sensitive=false,
}

% For espresso input listings
\lstdefinestyle{ESPRESSO}{language=espresso, 
  basicstyle=\footnotesize\ttfamily,  % copy/paste from pdf w/o mangled quotes
  frame=tlrb,
  frameround=ftft,
  breaklines=true,
  columns=fullflexible,   % copy/paste from pdf w/o added spaces
  keepspaces=true,        % but do keep the spaces that are already there
  showstringspaces=false, % avoid showing underbrackets in quoted text
}

\lstdefinelanguage{gamess}
{classoffset=1
  mathescape=false,
  keywords={CITYP,SCFTYP,CISTEP,FULLNR,GROUP,NMCC,NDOC,NALP,NVAL,ISTSYM,MXNINT,FORS,PRTTOL,CVGTOL,ITERMX,NFZC,SOCI,NEXT,ACURCY,RUNTYP,MULT,ISPHER,EXETYP,COORD,MAXIT,MEMORY,DIRSCF,GUESS,},
  keywordstyle=\color{espblue},
  keywords=[3]{\$ECP,\$DRT,\$CIDRT,\$GUGDIA,\$MCSCF,\$CONTRL,\$END,\$SYSTEM,\$DATA,\$SCF,\$GUESS,},
  keywordstyle=[3]\color{espred},
  sensitive=true,
}

\lstdefinestyle{GAMESS}{language=gamess,
  basicstyle=\footnotesize\ttfamily,
  commentstyle=\color{gray}\ttfamily,
  frame=tlrb,
  breaklines=true,
  keepspaces=true,
}

\lstdefinestyle{LATEX}{language=[LaTeX]TeX,
  basicstyle=\footnotesize\ttfamily,
  commentstyle=\color{gray}\ttfamily,
  breaklines=true,
  keepspaces=true,
}



\newcommand{\igamess}[1]{\lstinline[style=GAMESS]{#1}}
\newcommand{\ishell}[1]{\lstinline[style=SHELL]{#1}}
\newcommand{\ixml}[1]{\lstinline[style=QMCPXML]{#1}}
\newcommand\txml[1][]{\begin{lstlisting}[style=QMCPXML]^^J{#1}\end{lstlisting}}
\newcommand{\icode}[1]{\lstinline[style=C++]|#1|}
\newcommand{\ilatex}[1]{\lstinline[style=LATEX]{#1}}
% deprecated
\newcommand{\inlinecode}[1]{\lstinline|#1|}
